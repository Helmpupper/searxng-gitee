!function(){function e(e){return document.querySelector(e)}var t={};function i(e,t=100,a={}){let n,r,o,s,l;if("function"!=typeof e)throw TypeError(`Expected the first parameter to be a function, got \`${typeof e}\`.`);if(t<0)throw RangeError("`wait` must not be negative.");let{immediate:c}="boolean"==typeof a?{immediate:a}:a;function g(){let t=n,i=r;return n=void 0,r=void 0,l=e.apply(t,i)}function d(){let e=Date.now()-s;e<t&&e>=0?o=setTimeout(d,t-e):(o=void 0,c||(l=g()))}let m=function(...e){if(n&&this!==n&&Object.getPrototypeOf(this)===Object.getPrototypeOf(n))throw Error("Debounced method called with different contexts of the same prototype.");n=this,r=e,s=Date.now();let i=c&&!o;return o||(o=setTimeout(d,t)),i&&(l=g()),l};return Object.defineProperty(m,"isPending",{get:()=>void 0!==o}),m.clear=()=>{o&&(clearTimeout(o),o=void 0)},m.flush=()=>{o&&m.trigger()},m.trigger=()=>{l=g(),m.clear()},m}function a(t,{imageSrc:i,imageTitle:a,imageContent:n,imageSource:r,imageFilesize:o,imageDownload:s,formatSpan:l,filesizeSpan:c,engineSpan:g,previewImg:d}){e("#results").classList.add("image-open"),i.src="",d.src=t.getAttribute("data-gitee-thumbnail"),i.src=t.getAttribute("data-gitee-src"),a.innerText=t.getAttribute("data-gitee-title"),n.innerText=t.getAttribute("data-gitee-content"),t.hasAttribute("data-gitee-format")?l.innerText=t.getAttribute("data-gitee-format"):l.innerText="Unknown",t.hasAttribute("data-gitee-filesize")?(o.hasAttribute("hidden")&&o.setAttribute("hidden",""),c.innerText=t.getAttribute("data-gitee-filesize")):o.setAttribute("hidden",""),r.href=t.getAttribute("data-gitee-source"),s.href=t.getAttribute("data-gitee-src"),g.innerText=t.getAttribute("data-gitee-engine")}t.debounce=i,t=i;let n=e(".results-container");n&&n.nodeType===Node.ELEMENT_NODE&&n.classList.contains("image-page")&&function(i){var n,r;let o=e("#image-src"),s=e("#preview-img"),l=e("#image-title"),c=e("#image-content"),g=e("#image-format"),d=e("#image-filesize"),m=e("#image-source"),u=e("#image-download"),p=e("#image-copy"),f=g.getElementsByClassName("value")[0],h=d.getElementsByClassName("value")[0],b=e("#image-engine");new MutationObserver(e=>{for(let t of e)"childList"===t.type&&t.addedNodes.forEach(e=>{e instanceof HTMLElement&&e.classList.contains("images_group")&&e.childNodes.forEach(t=>t.addEventListener("click",t=>{t.preventDefault(),w(),e.classList.add("current-open"),e.scrollIntoView({behavior:"smooth",block:"nearest"}),a(e,{imageSrc:o,imageTitle:l,imageContent:c,imageSource:m,imageFilesize:d,imageDownload:u,filesizeSpan:h,formatSpan:f,engineSpan:b,previewImg:s})}))})}).observe(i,{childList:!0,subtree:!0}),(n=".image",document.querySelectorAll(n)).forEach(e=>{"A"===e.tagName&&e instanceof HTMLElement&&e.addEventListener("click",t=>{t.preventDefault(),w(),e.classList.add("current-open"),e.scrollIntoView({behavior:"smooth",block:"nearest"}),a(e,{imageSrc:o,imageTitle:l,imageContent:c,imageSource:m,imageFilesize:d,imageDownload:u,filesizeSpan:h,formatSpan:f,engineSpan:b,previewImg:s})})}),"http:"===location.protocol&&p.setAttribute("disabled","true"),p.addEventListener("click",()=>{let e=document.createElement("canvas");e.width=o.width,e.height=o.height,e.getContext("2d").drawImage(o,0,0,o.width,o.height),e.toBlob(e=>{e&&function(e){if(navigator.clipboard&&e instanceof ClipboardItem)return navigator.permissions.query({name:"clipboard-write"}).then(t=>{"granted"===t.state||"prompt"===t.state?navigator.clipboard.write([e]):alert("Clipboard unaccessible")});if("string"!=typeof e)return;let t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}(new ClipboardItem({"image/png":e}))}),e.remove()});let v=e("#results"),y=e("#image-details");function w(){let e=i.getElementsByClassName("current-open")[0];e&&e.classList.remove("current-open")}v.addEventListener("scroll",((r=t)&&r.__esModule?r.default:r)(function(){if(v.scrollTop<50){y.style.top="0px",y.style.height="80vh";return}y.style.height="95vh",y.style.top=`calc(${v.scrollTop}px - 15vh)`},500)),y.getElementsByClassName("close")[0].addEventListener("click",function(){w(),v.classList.remove("image-open")})}(n)}();